Various techniques to reach the result. The first few flags are accessible throughheuristic/greedy solutions. I could get down to 129 with greedy.

To reach 126, you will probably need to use a set cover solver. The elements of the set are the routes, and the sets are the network nodes.
Note: the sources of this challenge are located in ../hack-code-part1/server-files/

