#!/usr/bin/env bash
# file automatically generated by mkctf.

function print {
    (>&2 printf "\x1b[34m${1}\x1b[0m\n")
}
function exit_success {
    (>&2 printf "\x1b[32m- Script succeeded.\x1b[0m\n")
    exit 0
}
function exit_failure {
    (>&2 printf "\x1b[31m- Script failed.\x1b[0m\n")
    exit 1
}
function exit_non_applicable {
    (>&2 printf "\x1b[36m- Script non applicable.\x1b[0m\n")
    exit 2
}
function exit_manual {
    (>&2 printf "\x1b[33m- Script requires a manual operation.\x1b[0m\n")
    exit 3
}
function exit_not_implemented {
    (>&2 printf "\x1b[35m- Script not implemented.\x1b[0m\n")
    exit 4
}


print "- Ensuring directories exist..."
mkdir -p server-files/universe
mkdir -p server-files/public
print "- Exporting challenge flag..."
grep -E 'flag:' .mkctf.yml | cut -d' ' -f2 > server-files/universe/flag
print "- Creating a fake nano swap file..."
cp server-files/server.py server-files/public/.server.py.swp
exit_success
