#!/usr/bin/env bash
# file automatically generated by mkctf.

function print {
    (>&2 printf "\x1b[34m${1}\x1b[0m\n")
}

function exit_success {
    (>&2 printf "\x1b[32m- Script succeeded.\x1b[0m\n")
    exit 0
}

function exit_failure {
    (>&2 printf "\x1b[31m- Script failed.\x1b[0m\n")
    exit 1
}

function exit_non_applicable {
    (>&2 printf "\x1b[36m- Script non applicable.\x1b[0m\n")
    exit 2
}

function exit_manual {
    (>&2 printf "\x1b[33m- Script requires a manual operation.\x1b[0m\n")
    exit 3
}

function exit_not_implemented {
    (>&2 printf "\x1b[35m- Script not implemented.\x1b[0m\n")
    exit 4
}

sudo docker run --env DOCKER_USER=insecurity --env DOCKER_PASSWORD=$(read -p 'docker passwd?' a;echo $a) --rm -i -p 2222:22 -v /var/run/docker.sock:/var/run/docker.sock -v $PWD/server-files/authorized_keys:/home/user/.ssh/authorized_keys \
registry.infra.insecurity-insa.fr/insecurity/intergover  && exit_success || exit_failure
